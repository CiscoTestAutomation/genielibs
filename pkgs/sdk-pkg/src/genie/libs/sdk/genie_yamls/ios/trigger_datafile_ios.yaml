extends: "%CALLABLE{genie.libs.sdk.genie_yamls.datafile(trigger)}"

#===============================================================================
#                                PROCESSORS
#===============================================================================

global_processors:
  pre:
    clear_traffic_statistics:
      method: genie.harness.libs.prepostprocessor.clear_traffic_statistics
      parameters:
        clear_stats_time: 10
  post:
    check_traffic_loss:
      method: genie.harness.libs.prepostprocessor.check_traffic_loss
      parameters:
        loss_tolerance: 15
        check_interval: 60
        check_iteration: 10
    compare_traffic_profile:
      method: genie.harness.libs.prepostprocessor.compare_traffic_profile
      parameters:
        loss_tolerance: 1
        frames_tolerance: 2
        rate_tolerance: 2
    test_case_genie_telemetry:
      method: genie.telemetry.processors.genie_telemetry_processor
    order: ['check_traffic_loss', 'compare_traffic_profile', 'test_case_genie_telemetry']

#===============================================================================
#                                SLEEP
#===============================================================================

TriggerSleep:
    groups: ['sleep']
    sleep_time: 5
    message_time: 1
    count: 1
    devices: ['uut']

TriggerProfileSystem:
    groups: ['profile']
    timeout:
       max_time: 300
       interval: 15
    tgn_timeout: 300
    tgn_delay: 10
    tgn_max_outage: 120
    features: ['platform', 'interface']
    devices: ['uut']
    # golden_file: <golden pts file to compare with, if not provided, no comparison>
    # location: <Location to save the learnt features pts at, default runtime directory>

TriggerShutNoShutLoopbackInterface:
  groups: ["shut-noshut", "interface", "L3"]
  timeout:
    max_time: 120
    interval: 30
  tgn_timeout: 300
  tgn_delay: 10
  devices: ["uut"]
